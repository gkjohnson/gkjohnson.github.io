<dom-module id="sticky-element">
    <template>
        <style type="text/css">
/*            #content {
                height: 1px;
                width: 100%;
                position: relative;
            }

            */
            #content[stuck] {
                position: fixed;
                top: 0;
                width: 100%;
            }
        </style>
        <div id="wrapper">
            <div id="content" stuck$="[[stuck]]">
                <slot></slot>
            </div>
        </div>
    </template>
</dom-module>
<script type="text/javascript">
    (function() {
        class StickyElement extends Polymer.Element {
            static get is() { return 'sticky-element' }

            static get properties() {
                return {
                    stuck: {
                        type: Boolean,
                        value: false,
                        reflectToAttribute: true
                    }
                }
            }

            connectedCallback() {
                super.connectedCallback()
                
                let ogHeight = 0
                const wrapper = this.shadowRoot.querySelector('#wrapper')
                const content = this.shadowRoot.querySelector('#content')
                this._scrollFunc = () => {
                    if (!this.stuck) wrapper.style = `height:${content.clientHeight}px`

                    this.stuck = wrapper.getBoundingClientRect().top  <= 0
                }
                window.addEventListener('scroll', this._scrollFunc)
            }

            disconnectedCallback() {
                super.disconnectedCallback()
                window.removeEventListener('scroll', this._scrollFunc)
            }

        }
        customElements.define(StickyElement.is, StickyElement)

    })()
</script>