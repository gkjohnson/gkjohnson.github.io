<dom-module id="sticky-element">
    <template>
        <style type="text/css">
            [stuck] {
                position: fixed;
                width: 100%;
                top: 0;
            }
        </style>
        <div id="content" stuck$="[[stuck]]">
            <slot></slot>
        </div>
    </template>
</dom-module>
<script type="text/javascript">
    (function() {
        class StickyElement extends Polymer.Element {
            static get is() { return 'sticky-element' }

            static get properties() {
                return {
                    stuck: {
                        type: Boolean,
                        value: false,
                        reflectToAttribute: true
                    }
                }
            }

            connectedCallback() {
                super.connectedCallback()
                
                this._scrollFunc = () => {
                    const el = this.querySelector('*') || this
                    const height = el.offsetHeight

                    this.stuck = this.getBoundingClientRect().top - height <= 0
                }
                this._scrollFunc()
                window.addEventListener('scroll', this._scrollFunc)
            }

            disconnectedCallback() {
                super.disconnectedCallback()
                window.removeEventListener('scroll', this._scrollFunc)
            }

        }
        customElements.define(StickyElement.is, StickyElement)

    })()
</script>